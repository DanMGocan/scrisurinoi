{% extends "base.html" %}

{% block title %}Home - Literary Community{% endblock %}

{% block content %}
<div class="posts-container">
    <div class="posts-header">
        <h2>Literary Works</h2>
        <div class="post-filters">
            <a href="{{ url_for('main.index') }}" class="btn {% if not request.args.get('type') %}btn-primary{% endif %}">All</a>
            <a href="{{ url_for('main.index', type='poetry') }}" class="btn {% if request.args.get('type') == 'poetry' %}btn-primary{% endif %}">Poetry</a>
            <a href="{{ url_for('main.index', type='story') }}" class="btn {% if request.args.get('type') == 'story' %}btn-primary{% endif %}">Stories</a>
        </div>
    </div>

    {% for post in posts %}
    <div class="post-card">
        <h3 class="post-title">{{ post.title }}</h3>
        <div class="post-meta">
            <span>By {{ post.author.name }}</span>
            <span>{{ post.created_at.strftime('%B %d, %Y') }}</span>
            <span class="post-type-badge">{{ post.post_type|title }}</span>
        </div>
        <div class="post-preview">
            {{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}
        </div>
        <div class="post-footer">
            <a href="{{ url_for('main.view_post', post_id=post.id) }}" class="btn btn-primary">Read More</a>
            <span class="comment-count">{{ post.comments|length }} comments</span>
        </div>
    </div>
    {% else %}
    <div class="no-posts">
        <p>No posts found. {% if current_user.is_authenticated %}<a href="{{ url_for('main.create_post') }}">Create one!</a>{% endif %}</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
