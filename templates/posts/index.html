{% extends "base.html" %}

{% block title %}Acasă - Comunitatea Literară{% endblock %}

{% block content %}
<div class="posts-container">
    <div class="posts-header">
        <h2><i class="fas fa-feather-alt"></i> Opere Literare</h2>
        <div class="post-filters">
            <a href="{{ url_for('index') }}" class="btn {% if not request.args.get('type') %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-layer-group"></i> Toate
            </a>
            <a href="{{ url_for('index', type='poetry') }}" class="btn {% if request.args.get('type') == 'poetry' %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-feather"></i> Poezie
            </a>
            <a href="{{ url_for('index', type='story') }}" class="btn {% if request.args.get('type') == 'story' %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-book"></i> Proză
            </a>
            <a href="{{ url_for('index', type='essay') }}" class="btn {% if request.args.get('type') == 'essay' %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-pen-nib"></i> Eseu
            </a>
            <a href="{{ url_for('index', type='theater') }}" class="btn {% if request.args.get('type') == 'theater' %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-theater-masks"></i> Teatru
            </a>
            <a href="{{ url_for('index', type='letter') }}" class="btn {% if request.args.get('type') == 'letter' %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-envelope-open-text"></i> Scrisoare
            </a>
            <a href="{{ url_for('index', type='journal') }}" class="btn {% if request.args.get('type') == 'journal' %}btn-primary{% else %}btn-secondary{% endif %}">
                <i class="fas fa-book-open"></i> Jurnal
            </a>
        </div>
    </div>

    {% for post in posts %}
    <div class="post-card">
        <h3 class="post-title">
            <a href="{{ url_for('view_post', post_id=post.id) }}">{{ post.title }}</a>
        </h3>
        <div class="post-meta">
            <span><i class="fas fa-user"></i> {{ post.author.name }}</span>
            <span><i class="far fa-calendar-alt"></i> {{ post.created_at.strftime('%d.%m.%Y') }}</span>
            <span><i class="fas fa-heart"></i> {{ post.likes|length }}</span>
            <span class="post-type-badge">
                {% if post.post_type == 'poetry' %}
                    <i class="fas fa-feather"></i> Poezie
                {% elif post.post_type == 'story' %}
                    <i class="fas fa-book"></i> Proză
                {% elif post.post_type == 'essay' %}
                    <i class="fas fa-pen-nib"></i> Eseu
                {% elif post.post_type == 'theater' %}
                    <i class="fas fa-theater-masks"></i> Teatru
                {% elif post.post_type == 'letter' %}
                    <i class="fas fa-envelope-open-text"></i> Scrisoare
                {% elif post.post_type == 'journal' %}
                    <i class="fas fa-book-open"></i> Jurnal
                {% else %}
                    {{ post.post_type|title }}
                {% endif %}
            </span>
        </div>
        <div class="post-preview">
            {% if post.description %}
                {{ post.description }}
            {% else %}
                {{ post.content[:150] }}{% if post.content|length > 150 %}...{% endif %}
            {% endif %}
        </div>
        <div class="post-footer">
            <a href="{{ url_for('view_post', post_id=post.id) }}" class="btn btn-primary">
                <i class="fas fa-book-open"></i> Citește mai mult
            </a>
            <span class="comment-count">{{ post.comments|length }} comentarii</span>
        </div>
    </div>
    {% else %}
    <div class="no-posts">
        <div class="empty-state">
            <i class="fas fa-pen-fancy fa-3x"></i>
            <p>Nu există postări. {% if current_user.is_authenticated %}<a href="{{ url_for('create_post') }}">Creează una!</a>{% endif %}</p>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
